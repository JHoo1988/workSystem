<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>APP版本</title>
    <link rel="stylesheet" href="../layui/css/layui.css">

</head>
<body>
<style>
    html, body {
        width: 100%;
        height: 100%;
    }

    * {
        margin: 0px;
        padding: 0px;
    }

    #search-header {
        padding-top: 10px;
    }

    #search-header .layui-form .layui-inline {
        margin-bottom: 0px;margin-right: 0px;
    }

    #search-header .layui-form .layui-inline .layui-form-label {
        width: 60px;
    }
</style>
<div id="search-header">
    <form class="layui-form" action="">
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">包名称</label>
                <div class="layui-input-inline">
                    <input type="text" name="apkname" placeholder="请输入包名称" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">版本编码</label>
                <div class="layui-input-inline">
                    <input type="text" name="versioncode" placeholder="请输入版本编码" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">版本名称</label>
                <div class="layui-input-inline">
                    <input type="text" name="versionname" placeholder="请输入版本名称" autocomplete="off" class="layui-input">
                </div>
            </div>
            <button class="layui-btn layui-btn-normal layui-btn-radius" lay-submit lay-filter="formDemo">
                <i class="layui-icon">&#xe615;</i> 查询
            </button>
        </div>
    </form>
    <button class="layui-btn layui-btn-primary layui-btn layui-btn-sm" data-method="create">
        <i class="layui-icon">&#xe654;</i> 新建
    </button>
    <button class="layui-btn layui-btn-primary layui-btn layui-btn-sm" lay-submit lay-filter="edit">
        <i class="layui-icon">&#xe642;</i> 编辑
    </button>
    <div class="layui-layer layui-layer-dialog layui-layer-border layui-layer-msg layui-layer-hui" id="layui-layer3" type="dialog" times="3" showtime="3000" contype="string" style="z-index: 19891017; top: 450.5px; left: 502.5px;"><div id="" class="layui-layer-content">请选中一条数据</div><span class="layui-layer-setwin"></span></div>
</div>
<div id="table-content">
    <table class="layui-hide" id="test" lay-filter="selectData"></table>
</div>


<!--<div class="dialog_content">-->
    <!--<form id="info_form" name="info_form" style="width: 700px; height: 400px" class="n_scroll-y smart-form hidden-x"-->
          <!--action="/index.php?m=appversion&f=addVersion" method="post"><input type="hidden" name="id" id="id"-->
                                                                             <!--class="input-text" value="">-->
        <!--<fieldset>  &lt;!&ndash; \u6240\u5c5e\u7cfb\u7edf &ndash;&gt;-->
            <!--<div class="col-xs-12 col-sm-6 col-md-10">-->
                <!--<div class="row row_padr"><label-->
                        <!--class="label col col-4 text-align-right">新建</label>-->
                    <!--<section class="col col-8"><label class="no-margin label_rad"> <input type="radio" value="android"-->
                                                                                          <!--name="type"-->
                                                                                          <!--class="radiobox no-margin">-->
                        <!--<span class="mar_bot"></span>\u5b89\u5353\u7248 </label> <label class="no-margin label_rad">-->
                        <!--<input type="radio" value="ios" name="type" class="radiobox no-margin"> <span-->
                            <!--class="mar_bot"></span>\u82f9\u679c\u7248 </label></section>-->
                <!--</div>-->
            <!--</div>    &lt;!&ndash; \u5305\u540d\u79f0 &ndash;&gt;-->
            <!--<div class="col-xs-12 col-sm-6 col-md-10">-->
                <!--<div class="row row_padr"><label class="label col col-4 text-align-right txt-color-red">\u5305\u540d\u79f0\uff1a</label>-->
                    <!--<section class="col col-8"><label class="input"> <input id="apkname" class="tel_text new_text"-->
                                                                            <!--type="text" name="apkname"> </label>-->
                    <!--</section>-->
                <!--</div>-->
            <!--</div>    &lt;!&ndash; \u7248\u672c\u7f16\u7801 &ndash;&gt;-->
            <!--<div class="col-xs-12 col-sm-6 col-md-10">-->
                <!--<div class="row row_padr"><label class="label col col-4 text-align-right txt-color-red">\u7248\u672c\u7f16\u7801\uff1a</label>-->
                    <!--<section class="col col-8"><label class="input"> <input id="versioncode" class="tel_text new_text"-->
                                                                            <!--type="text" name="versioncode"> </label>-->
                    <!--</section>-->
                <!--</div>-->
            <!--</div>    &lt;!&ndash; \u7248\u672c\u540d\u79f0 &ndash;&gt;-->
            <!--<div class="col-xs-12 col-sm-6 col-md-10">-->
                <!--<div class="row row_padr"><label class="label col col-4 text-align-right txt-color-red">\u7248\u672c\u540d\u79f0\uff1a</label>-->
                    <!--<section class="col col-8"><label class="input"> <input type="text" name="versionname"-->
                                                                            <!--id="versionname" value=""-->
                                                                            <!--class="tel_text new_text"/>\n </label>-->
                    <!--</section>-->
                <!--</div>-->
            <!--</div>    &lt;!&ndash; \u4e0b\u8f7d\u5730\u5740 &ndash;&gt;-->
            <!--<div class="col-xs-12 col-sm-6 col-md-10">-->
                <!--<div class="row row_padr"><label class="label col col-4 text-align-right txt-color-red">\u4e0b\u8f7d\u5730\u5740\uff1a</label>-->
                    <!--<section class="col col-8"><label class="input"> <input id="downpath" class="tel_text new_text"-->
                                                                            <!--type="text" name="downpath"></label>-->
                    <!--</section>-->
                <!--</div>-->
            <!--</div>    &lt;!&ndash; API\u4e3b\u673a &ndash;&gt;-->
            <!--<div class="col-xs-12 col-sm-6 col-md-10">-->
                <!--<div class="row row_padr"><label class="label col col-4 text-align-right txt-color-red">API\u4e3b\u673a\uff1a</label>-->
                    <!--<section class="col col-8"><label class="input"> <input id="apihost" class="tel_text new_text"-->
                                                                            <!--type="text" name="apihost"></label>-->
                    <!--</section>-->
                <!--</div>-->
            <!--</div>    &lt;!&ndash; \u5347\u7ea7\u65e5\u5fd7 &ndash;&gt;-->
            <!--<div class="col-xs-12 col-sm-6 col-md-10">-->
                <!--<div class="row row_padr"><label class="label col col-4 text-align-right txt-color-red">\u5347\u7ea7\u65e5\u5fd7\uff1a</label>-->
                    <!--<section class="col col-8"><label class="input"> <input id="updatelog" class="tel_text new_text"-->
                                                                            <!--type="text" name="updatelog"></label>-->
                    <!--</section>-->
                <!--</div>-->
            <!--</div>    &lt;!&ndash; \u6d3b\u52a8\u9891\u7387 &ndash;&gt;-->
            <!--<div class="col-xs-12 col-sm-6 col-md-10">-->
                <!--<div class="row row_padr"><label class="label col col-4 text-align-right txt-color-red">\u6d3b\u52a8\u9891\u7387(\u5206\u949f)\uff1a</label>-->
                    <!--<section class="col col-8"><label class="input"> <input id="activerate" class="tel_text new_text"-->
                                                                            <!--type="text" name="activerate"></label>-->
                    <!--</section>-->
                <!--</div>-->
            <!--</div>    &lt;!&ndash; \u662f\u5426\u5df2\u7ecf\u53d1\u5e03 &ndash;&gt;-->
            <!--<div class="col-xs-12 col-sm-6 col-md-10">-->
                <!--<div class="row row_padr"><label class="label col col-4 text-align-right">\u662f\u5426\u5df2\u53d1\u5e03\uff1a</label>-->
                    <!--<section class="col col-8"><label class="no-margin label_rad"> <input type="radio" value="1"-->
                                                                                          <!--name="ispublish"-->
                                                                                          <!--class="radiobox no-margin">-->
                        <!--<span class="mar_bot"></span>\u5df2\u53d1\u5e03 </label> <label class="no-margin label_rad">-->
                        <!--<input type="radio" value="0" name="ispublish" class="radiobox no-margin"> <span-->
                            <!--class="mar_bot"></span>\u672a\u53d1\u5e03 </label></section>-->
                <!--</div>-->
            <!--</div>    &lt;!&ndash; \u662f\u5426\u5f3a\u5236\u5347\u7ea7 &ndash;&gt;-->
            <!--<div class="col-xs-12 col-sm-6 col-md-10">-->
                <!--<div class="row row_padr" id="isforce"><label class="label col col-4 text-align-right">\u662f\u5426\u5f3a\u5236\u5347\u7ea7\uff1a</label>-->
                    <!--<section class="col col-8"><label class="no-margin label_rad"> <input type="radio" value="1"-->
                                                                                          <!--name="isforce"-->
                                                                                          <!--class="radiobox no-margin">-->
                        <!--<span class="mar_bot"></span>\u662f </label> <label class="no-margin label_rad"> <input-->
                            <!--type="radio" value="0" name="isforce" class="radiobox no-margin"> <span-->
                            <!--class="mar_bot"></span>\u5426 </label></section>-->
                <!--</div>-->
            <!--</div>-->
            <!--<div class="col-xs-12 col-sm-6 col-md-10" id="chose_role">-->
                <!--<div class="row row_padr"><label class="label col col-4 text-align-right txt-color-red">\u9009\u62e9\u89d2\u8272\uff1a</label>-->
                    <!--<section class="col col-8"><label class="input"> <input id="role" type="text" class="J_showdialog"-->
                                                                            <!--data-callback="selectRole" data-width="400"-->
                                                                            <!--data-id="shopskill"-->
                                                                            <!--data-title="\u9009\u62e9\u89d2\u8272"-->
                                                                            <!--readonly="true"-->
                                                                            <!--data-uri="/index.php?m=appversion&f=chooseRole"-->
                                                                            <!--value=""></label> <input type="hidden"-->
                                                                                                     <!--id="role_id"-->
                                                                                                     <!--value=""-->
                                                                                                     <!--name="role_id">-->
                    <!--</section>-->
                <!--</div>-->
            <!--</div>-->
        <!--</fieldset>-->
    <!--</form>-->
<!--</div>-->
<script src="../layui/layui.js"></script>
<!--<script>-->
    <!--function isRoleShow() {-->
        <!--if ($("#isforce input[name='isforce']:checked").val() == 1) {-->
            <!--$("#chose_role").show();-->
        <!--} else {-->
            <!--$("#chose_role").hide();-->
        <!--}-->
    <!--}-->

    <!--function selectRole() {-->
        <!--var obj = $(".role:checked");-->
        <!--var arr = [];-->
        <!--var idArr = [];-->
        <!--obj.each(function () {-->
            <!--arr.push($(this).attr("role"));-->
            <!--idArr.push($(this).val());-->
        <!--});-->
        <!--$("#role_id").val("," + idArr.toString() + ",");-->
        <!--$("#role").val(arr.toString());-->
    <!--}-->

    <!--$(function () {-->
        <!--$.formValidator.initConfig({formid: "info_form", autotip: true});-->
        <!--$("#apkname").formValidator({onshow: "&nbsp;", onfocus: "&nbsp;", oncorrect: "&nbsp;"}).inputValidator({-->
            <!--min: 1,-->
            <!--onerror: "\u8bf7\u8f93\u5165\u5305\u540d\u79f0"-->
        <!--});-->
        <!--$("#versioncode").formValidator({onshow: "&nbsp;", onfocus: "&nbsp;", oncorrect: "&nbsp;"}).inputValidator({-->
            <!--min: 1,-->
            <!--onerror: "\u8bf7\u8f93\u5165\u7248\u672c\u7f16\u7801"-->
        <!--});-->
        <!--$("#downpath").formValidator({onshow: "&nbsp;", onfocus: "&nbsp;", oncorrect: "&nbsp;"}).inputValidator({-->
            <!--min: 1,-->
            <!--onerror: "\u8bf7\u8f93\u5165\u4e0b\u8f7d\u5730\u5740"-->
        <!--});-->
        <!--$("#info_form").ajaxForm({success: complate, dataType: "json"});-->

        <!--function complate(result) {-->
            <!--if (result.status == 1) {-->
                <!--$.dialog.get(result.dialog).close();-->
                <!--$.pinphp.tip({content: result.msg});-->
                <!--window.location.reload();-->
            <!--} else {-->
                <!--$.pinphp.tip({content: result.msg, icon: "alert"});-->
            <!--}-->
        <!--}-->
    <!--});-->
    <!--$("#isforce").change(function () {-->
        <!--isRoleShow();-->
    <!--});-->
    <!--isRoleShow();-->
<!--</script>-->

<script>
    //一般直接写在一个js文件中
    layui.use(['layer', 'form', 'table'], function () {
        var $ = layui.jquery;
        var layer = layui.layer
            , form = layui.form
            , table = layui.table;
        //监听提交
        form.on('submit(formDemo)', function (data) {
            layer.msg(JSON.stringify(data.field));
            return false;
        });
        // 编辑
        form.on('submit(edit)', function (data) {
            var checkStatus = table.checkStatus('test'); //test即为基础参数id对应的值
            console.log(checkStatus.data) //获取选中行的数据
            console.log(checkStatus.data.length) //获取选中行数量，可作为是否有选中行的条件
            console.log(checkStatus.isAll) //表格是否全选
            if (checkStatus.data.length <= 0) {
                layer.msg('请选中一条数据');
            } else if (checkStatus.data.length > 1) {
                layer.msg('一次只能编辑一条数据');
            } else if (checkStatus.data.length = 1) {
                layer.msg('编辑');
            }
        });
        table.render({
            elem: '#test'
            // , url: 'http://www.worksystem.com/index.php?m=appversion&f=gridIndex'
            // , cellMinWidth: 80 //全局定义常规单元格的最小宽度，layui 2.2.1 新增 sort: true
            , limit: 20
            , cols: [[
                {type: 'checkbox'}
                , {field: 'type', title: "系统", width: 160, align: 'center', sortable: true},
                {field: 'downpath', title: "下载地址", width: 380, align: 'center', sortable: true},
                {field: 'apihost', title: "API主机", width: 320, align: 'center', sortable: true},
                {field: 'updatelog', title: "升级日志", width: 380, align: 'center', sortable: true},
                {field: 'activerate', title: "活动频率(分钟)", width: 120, align: 'center', sortable: false},
                {field: 'ispublish', title: "是否已发布", width: 120, align: 'center', sortable: false},
                {field: 'isforce', title: "是否强制升级", width: 120, align: 'center', sortable: true},
                {field: 'createtime', title: "创建时间", width: 180, align: 'center', sortable: true},
                {field: 'updatetime', title: "最后更新时间", width: 180, align: 'center', sortable: true}
            ]]
            ,
            data: [{
                "id": "39",
                "apkname": "hawkeye_v0.9.9.6",
                "versioncode": "107",
                "versionname": "v0.9.9.6",
                "downpath": "http:\/\/hktest.koyoo.cn\/soft\/test\/test_v0.9.9.6.apk",
                "apihost": "http:\/\/hktest.koyoo.cn\/rest\/index.php",
                "updatelog": "\u6d4b\u8bd5",
                "activerate": "5",
                "ispublish": "\u5df2\u53d1\u5e03",
                "isforce": "\u5426",
                "createtime": "2017-02-17 09:51:51",
                "updatetime": "2017-02-17 09:51:51",
                "role_id": "",
                "type": "android"
            }, {
                "id": "38",
                "apkname": "hawkeye_v1.1.10",
                "versioncode": "82",
                "versionname": "v1.1.10",
                "downpath": "https:\/\/hawkeye-test1.oss-cn-shenzhen.aliyuncs.com\/plist\/hawkeye_v1.1.10.plist",
                "apihost": "http:\/\/hktest.koyoo.cn\/rest\/index.php",
                "updatelog": "",
                "activerate": "5",
                "ispublish": "\u5df2\u53d1\u5e03",
                "isforce": "\u662f",
                "createtime": "2016-12-02 15:12:32",
                "updatetime": "2016-12-02 15:12:32",
                "role_id": "",
                "type": "ios"
            }, {
                "id": "37",
                "apkname": "hawkeye_v0.9.6.3",
                "versioncode": "80",
                "versionname": "v0.9.6.3",
                "downpath": "http:\/\/hktest.koyoo.cn\/soft\/hawkeye_v0.9.6.3.apk",
                "apihost": "http:\/\/hktest.koyoo.cn\/rest\/index.php",
                "updatelog": "\u6d4b\u8bd5",
                "activerate": "5",
                "ispublish": "\u5df2\u53d1\u5e03",
                "isforce": "\u5426",
                "createtime": "2016-06-03 10:33:39",
                "updatetime": "2016-10-31 22:36:57",
                "role_id": "",
                "type": "android"
            }]
            , page: true
            , even: true
        });
        // 监听复选框选中事件
        table.on('checkbox(selectData)', function (obj) {
            console.log(obj.checked); //当前是否选中状态
            console.log(obj.data); //选中行的相关数据
            console.log(obj.type); //如果触发的是全选，则为：all，如果触发的是单选，则为：one
        });

        //触发事件
        var active = {
            create: function () {
                // //示范一个公告层
                // layer.open({
                //     type: 1
                //     ,title: false //不显示标题栏
                //     ,closeBtn: false
                //     ,area: '300px;'
                //     ,shade: 0.8
                //     ,id: 'LAY_layuipro' //设定一个id，防止重复弹出
                //     ,btn: ['火速围观', '残忍拒绝']
                //     ,btnAlign: 'c'
                //     ,moveType: 1 //拖拽模式，0或者1
                //     ,content: '<div style="padding: 50px; line-height: 22px; background-color: #393D49; color: #fff; font-weight: 300;">你知道吗？亲！<br>layer ≠ layui<br><br>layer只是作为Layui的一个弹层模块，由于其用户基数较大，所以常常会有人以为layui是layerui<br><br>layer虽然已被 Layui 收编为内置的弹层模块，但仍然会作为一个独立组件全力维护、升级。<br><br>我们此后的征途是星辰大海 ^_^</div>'
                //     ,success: function(layero){
                //         var btn = layero.find('.layui-layer-btn');
                //         btn.find('.layui-layer-btn0').attr({
                //             href: 'http://www.layui.com/'
                //             ,target: '_blank'
                //         });
                //     }
                // });
                layer.msg('新建');
            }
        };
        $('#search-header .layui-btn').on('click', function () {
            var othis = $(this), method = othis.data('method');
            active[method] ? active[method].call(this, othis) : '';
        });
    });
</script>
</body>
</html>